<?xml version="1.0" encoding="utf-8"?>
<UserControl x:Class="Wavee.UI.WinUI.Views.Shell.SidebarControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:local="using:Wavee.UI.WinUI.Views.Shell"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:viewModels="using:Wavee.UI.ViewModels"
             xmlns:playlists="using:Wavee.UI.ViewModels.Playlists"
             mc:Ignorable="d">
    <UserControl.Resources>
        <Style TargetType="SplitView"
               x:Key="ResizableSidebar">
            <Setter Property="BorderBrush"
                    Value="{ThemeResource SystemControlForegroundTransparentBrush}" />
            <Setter Property="BorderThickness"
                    Value="{ThemeResource SplitViewLeftBorderThemeThickness}" />
            <Setter Property="HorizontalContentAlignment"
                    Value="Stretch" />
            <Setter Property="VerticalContentAlignment"
                    Value="Stretch" />
            <Setter Property="OpenPaneLength"
                    Value="{ThemeResource SplitViewOpenPaneThemeLength}" />
            <Setter Property="CompactPaneLength"
                    Value="{ThemeResource SplitViewCompactPaneThemeLength}" />
            <Setter Property="CornerRadius"
                    Value="{ThemeResource SplitViewPaneRootCornerRadius}" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="SplitView">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition x:Name="ColumnDefinition1"
                                                  Width="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=TemplateSettings.OpenPaneGridLength, FallbackValue=0}" />
                                <ColumnDefinition x:Name="ColumnDefinition2"
                                                  Width="*" />
                            </Grid.ColumnDefinitions>

                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="*" />
                            </Grid.RowDefinitions>

                            <!--  Sidebar Navigation  -->
                            <Grid x:Name="PaneRoot"
                                  Grid.Row="0"
                                  Grid.RowSpan="2"
                                  Grid.ColumnSpan="2"
                                  Width="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=TemplateSettings.OpenPaneLength}"
                                  HorizontalAlignment="Left"
                                  RightTapped="PaneRoot_RightTapped"
                                  Visibility="Collapsed">

                                <Grid.Clip>
                                    <RectangleGeometry x:Name="PaneClipRectangle">
                                        <RectangleGeometry.Transform>
                                            <CompositeTransform x:Name="PaneClipRectangleTransform" />
                                        </RectangleGeometry.Transform>
                                    </RectangleGeometry>
                                </Grid.Clip>

                                <Grid.RenderTransform>
                                    <CompositeTransform x:Name="PaneTransform" />
                                </Grid.RenderTransform>

                                <!--  Margin enables users to grab the scrollbar  -->
                                <Border Padding="2,0,2,2"
                                        Child="{TemplateBinding Pane}" />

                                <Rectangle x:Name="HCPaneBorder"
                                           Width="1"
                                           HorizontalAlignment="Right"
                                           x:DeferLoadStrategy="Lazy"
                                           Fill="{ThemeResource SystemControlForegroundTransparentBrush}"
                                           Visibility="Collapsed" />
                            </Grid>

                            <!--  This allows the user to resize the Sidebar  -->
                            <Border x:Name="ResizeElementBorder"
                                    Grid.Row="0"
                                    Grid.RowSpan="2"
                                    Grid.Column="{Binding ElementName=PaneRoot, Path=(Grid.Column), Mode=OneWay}"
                                    Width="18"
                                    Margin="0,0,-8,0"
                                    HorizontalAlignment="Right"
                                    AllowFocusOnInteraction="True"
                                    Background="Transparent"
                                    BorderBrush="Transparent"
                                    DoubleTapped="ResizeElementBorder_DoubleTapped"
                                    ManipulationCompleted="ResizeElementBorder_ManipulationCompleted"
                                    ManipulationDelta="Border_ManipulationDelta"
                                    ManipulationMode="TranslateX"
                                    ManipulationStarted="ResizeElementBorder_ManipulationStarted"
                                    PointerCanceled="Border_PointerExited"
                                    PointerEntered="Border_PointerEntered"
                                    PointerExited="Border_PointerExited"
                                    RenderTransform="{Binding ElementName=ContentRoot, Path=RenderTransform, Mode=OneWay}"
                                    Visibility="{Binding ElementName=PaneRoot, Path=Visibility, Mode=OneWay}">
                                <UserControl x:Name="ResizeElementControl"
                                             IsTabStop="True"
                                             KeyDown="Border_KeyDown"
                                             UseSystemFocusVisuals="True" />
                            </Border>

                            <!--  This is a special spot just for tabs so that the title bar DragArea can function properly  -->
                            <Border x:Name="TabContentBorder"
                                    Grid.Column="0"
                                    Grid.ColumnSpan="2"
                                    VerticalAlignment="Top"
                                    Canvas.ZIndex="2" />

                            <!--  File Area  -->
                            <Grid x:Name="ContentRoot"
                                  Grid.Row="2"
                                  Grid.ColumnSpan="2"
                                  Background="{ThemeResource App.Theme.FileArea.BackgroundBrush}">
                                <Grid.RenderTransform>
                                    <CompositeTransform x:Name="ContentTransform" />
                                </Grid.RenderTransform>
                                <Border Child="{TemplateBinding Content}" />

                                <Rectangle x:Name="LightDismissLayer"
                                           Fill="Transparent"
                                           Visibility="Collapsed" />
                            </Grid>

                            <VisualStateManager.VisualStateGroups>
                                <VisualStateGroup x:Name="DisplayModeStates">
                                    <VisualStateGroup.Transitions>
                                        <VisualTransition From="Closed"
                                                          To="OpenOverlayLeft">
                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PaneRoot"
                                                                               Storyboard.TargetProperty="(Canvas.ZIndex)">
                                                    <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                            Value="3" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PaneRoot"
                                                                               Storyboard.TargetProperty="Visibility">
                                                    <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                            Value="Visible" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="HCPaneBorder"
                                                                               Storyboard.TargetProperty="Visibility">
                                                    <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                            Value="Visible" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <DoubleAnimationUsingKeyFrames Storyboard.TargetName="PaneTransform"
                                                                               Storyboard.TargetProperty="TranslateX">
                                                    <DiscreteDoubleKeyFrame KeyTime="0:0:0"
                                                                            Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=TemplateSettings.NegativeOpenPaneLength}" />
                                                    <SplineDoubleKeyFrame KeySpline="0.1,0.9 0.2,1.0"
                                                                          KeyTime="0:0:0.35"
                                                                          Value="0" />
                                                </DoubleAnimationUsingKeyFrames>
                                                <DoubleAnimationUsingKeyFrames Storyboard.TargetName="PaneClipRectangleTransform"
                                                                               Storyboard.TargetProperty="TranslateX">
                                                    <DiscreteDoubleKeyFrame KeyTime="0:0:0"
                                                                            Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=TemplateSettings.OpenPaneLength}" />
                                                    <SplineDoubleKeyFrame KeySpline="0.1,0.9 0.2,1.0"
                                                                          KeyTime="0:0:0.35"
                                                                          Value="0" />
                                                </DoubleAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="LightDismissLayer"
                                                                               Storyboard.TargetProperty="Visibility">
                                                    <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                            Value="Visible" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <DoubleAnimationUsingKeyFrames Storyboard.TargetName="LightDismissLayer"
                                                                               Storyboard.TargetProperty="Opacity">
                                                    <DiscreteDoubleKeyFrame KeyTime="0:0:0"
                                                                            Value="0.0" />
                                                    <SplineDoubleKeyFrame KeySpline="0.1,0.9 0.2,1.0"
                                                                          KeyTime="0:0:0.35"
                                                                          Value="1.0" />
                                                </DoubleAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualTransition>
                                        <VisualTransition From="Closed"
                                                          To="OpenOverlayRight">
                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PaneRoot"
                                                                               Storyboard.TargetProperty="(Canvas.ZIndex)">
                                                    <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                            Value="3" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PaneRoot"
                                                                               Storyboard.TargetProperty="Visibility">
                                                    <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                            Value="Visible" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PaneRoot"
                                                                               Storyboard.TargetProperty="HorizontalAlignment">
                                                    <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                            Value="Right" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="HCPaneBorder"
                                                                               Storyboard.TargetProperty="HorizontalAlignment">
                                                    <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                            Value="Left" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="HCPaneBorder"
                                                                               Storyboard.TargetProperty="Visibility">
                                                    <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                            Value="Visible" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <DoubleAnimationUsingKeyFrames Storyboard.TargetName="PaneTransform"
                                                                               Storyboard.TargetProperty="TranslateX">
                                                    <DiscreteDoubleKeyFrame KeyTime="0:0:0"
                                                                            Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=TemplateSettings.OpenPaneLength}" />
                                                    <SplineDoubleKeyFrame KeySpline="0.1,0.9 0.2,1.0"
                                                                          KeyTime="0:0:0.35"
                                                                          Value="0" />
                                                </DoubleAnimationUsingKeyFrames>
                                                <DoubleAnimationUsingKeyFrames Storyboard.TargetName="PaneClipRectangleTransform"
                                                                               Storyboard.TargetProperty="TranslateX">
                                                    <DiscreteDoubleKeyFrame KeyTime="0:0:0"
                                                                            Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=TemplateSettings.NegativeOpenPaneLength}" />
                                                    <SplineDoubleKeyFrame KeySpline="0.1,0.9 0.2,1.0"
                                                                          KeyTime="0:0:0.35"
                                                                          Value="0" />
                                                </DoubleAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="LightDismissLayer"
                                                                               Storyboard.TargetProperty="Visibility">
                                                    <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                            Value="Visible" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <DoubleAnimationUsingKeyFrames Storyboard.TargetName="LightDismissLayer"
                                                                               Storyboard.TargetProperty="Opacity">
                                                    <DiscreteDoubleKeyFrame KeyTime="0:0:0"
                                                                            Value="0.0" />
                                                    <SplineDoubleKeyFrame KeySpline="0.1,0.9 0.2,1.0"
                                                                          KeyTime="0:0:0.35"
                                                                          Value="1.0" />
                                                </DoubleAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualTransition>
                                        <VisualTransition From="ClosedCompactLeft"
                                                          To="OpenCompactOverlayLeft">

                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PaneRoot"
                                                                               Storyboard.TargetProperty="(Canvas.ZIndex)">
                                                    <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                            Value="3" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ColumnDefinition1"
                                                                               Storyboard.TargetProperty="Width">
                                                    <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                            Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=TemplateSettings.CompactPaneGridLength, FallbackValue=0}" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentRoot"
                                                                               Storyboard.TargetProperty="(Grid.Column)">
                                                    <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                            Value="1" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentRoot"
                                                                               Storyboard.TargetProperty="(Grid.ColumnSpan)">
                                                    <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                            Value="1" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PaneRoot"
                                                                               Storyboard.TargetProperty="Visibility">
                                                    <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                            Value="Visible" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="HCPaneBorder"
                                                                               Storyboard.TargetProperty="Visibility">
                                                    <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                            Value="Visible" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <DoubleAnimationUsingKeyFrames Storyboard.TargetName="PaneClipRectangleTransform"
                                                                               Storyboard.TargetProperty="TranslateX">
                                                    <DiscreteDoubleKeyFrame KeyTime="0:0:0"
                                                                            Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=TemplateSettings.NegativeOpenPaneLengthMinusCompactLength}" />
                                                    <SplineDoubleKeyFrame KeySpline="0.1,0.9 0.2,1.0"
                                                                          KeyTime="0:0:0.35"
                                                                          Value="0" />
                                                </DoubleAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="LightDismissLayer"
                                                                               Storyboard.TargetProperty="Visibility">
                                                    <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                            Value="Visible" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <DoubleAnimationUsingKeyFrames Storyboard.TargetName="LightDismissLayer"
                                                                               Storyboard.TargetProperty="Opacity">
                                                    <DiscreteDoubleKeyFrame KeyTime="0:0:0"
                                                                            Value="0.0" />
                                                    <SplineDoubleKeyFrame KeySpline="0.1,0.9 0.2,1.0"
                                                                          KeyTime="0:0:0.35"
                                                                          Value="1.0" />
                                                </DoubleAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualTransition>
                                        <VisualTransition From="ClosedCompactRight"
                                                          To="OpenCompactOverlayRight">

                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PaneRoot"
                                                                               Storyboard.TargetProperty="(Canvas.ZIndex)">
                                                    <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                            Value="3" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ColumnDefinition1"
                                                                               Storyboard.TargetProperty="Width">
                                                    <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                            Value="*" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ColumnDefinition2"
                                                                               Storyboard.TargetProperty="Width">
                                                    <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                            Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=TemplateSettings.CompactPaneGridLength, FallbackValue=0}" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentRoot"
                                                                               Storyboard.TargetProperty="(Grid.ColumnSpan)">
                                                    <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                            Value="1" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PaneRoot"
                                                                               Storyboard.TargetProperty="Visibility">
                                                    <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                            Value="Visible" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PaneRoot"
                                                                               Storyboard.TargetProperty="HorizontalAlignment">
                                                    <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                            Value="Right" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="HCPaneBorder"
                                                                               Storyboard.TargetProperty="HorizontalAlignment">
                                                    <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                            Value="Left" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="HCPaneBorder"
                                                                               Storyboard.TargetProperty="Visibility">
                                                    <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                            Value="Visible" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <DoubleAnimationUsingKeyFrames Storyboard.TargetName="PaneClipRectangleTransform"
                                                                               Storyboard.TargetProperty="TranslateX">
                                                    <DiscreteDoubleKeyFrame KeyTime="0:0:0"
                                                                            Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=TemplateSettings.OpenPaneLengthMinusCompactLength}" />
                                                    <SplineDoubleKeyFrame KeySpline="0.1,0.9 0.2,1.0"
                                                                          KeyTime="0:0:0.35"
                                                                          Value="0" />
                                                </DoubleAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="LightDismissLayer"
                                                                               Storyboard.TargetProperty="Visibility">
                                                    <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                            Value="Visible" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <DoubleAnimationUsingKeyFrames Storyboard.TargetName="LightDismissLayer"
                                                                               Storyboard.TargetProperty="Opacity">
                                                    <DiscreteDoubleKeyFrame KeyTime="0:0:0"
                                                                            Value="0.0" />
                                                    <SplineDoubleKeyFrame KeySpline="0.1,0.9 0.2,1.0"
                                                                          KeyTime="0:0:0.35"
                                                                          Value="1.0" />
                                                </DoubleAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualTransition>
                                        <VisualTransition From="OpenOverlayLeft"
                                                          To="Closed">
                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PaneRoot"
                                                                               Storyboard.TargetProperty="Visibility">
                                                    <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                            Value="Visible" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="HCPaneBorder"
                                                                               Storyboard.TargetProperty="Visibility">
                                                    <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                            Value="Visible" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <DoubleAnimationUsingKeyFrames Storyboard.TargetName="PaneTransform"
                                                                               Storyboard.TargetProperty="TranslateX">
                                                    <SplineDoubleKeyFrame KeySpline="0.1,0.9 0.2,1.0"
                                                                          KeyTime="0:0:0.12"
                                                                          Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=TemplateSettings.NegativeOpenPaneLength}" />
                                                </DoubleAnimationUsingKeyFrames>
                                                <DoubleAnimationUsingKeyFrames Storyboard.TargetName="PaneClipRectangleTransform"
                                                                               Storyboard.TargetProperty="TranslateX">
                                                    <SplineDoubleKeyFrame KeySpline="0.1,0.9 0.2,1.0"
                                                                          KeyTime="0:0:0.12"
                                                                          Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=TemplateSettings.OpenPaneLength}" />
                                                </DoubleAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="LightDismissLayer"
                                                                               Storyboard.TargetProperty="Visibility">
                                                    <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                            Value="Visible" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <DoubleAnimationUsingKeyFrames Storyboard.TargetName="LightDismissLayer"
                                                                               Storyboard.TargetProperty="Opacity">
                                                    <DiscreteDoubleKeyFrame KeyTime="0:0:0"
                                                                            Value="1.0" />
                                                    <SplineDoubleKeyFrame KeySpline="0.1,0.9 0.2,1.0"
                                                                          KeyTime="0:0:0.12"
                                                                          Value="0.0" />
                                                </DoubleAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualTransition>
                                        <VisualTransition From="OpenOverlayRight"
                                                          To="Closed">

                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PaneRoot"
                                                                               Storyboard.TargetProperty="Visibility">
                                                    <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                            Value="Visible" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PaneRoot"
                                                                               Storyboard.TargetProperty="HorizontalAlignment">
                                                    <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                            Value="Right" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="HCPaneBorder"
                                                                               Storyboard.TargetProperty="HorizontalAlignment">
                                                    <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                            Value="Left" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="HCPaneBorder"
                                                                               Storyboard.TargetProperty="Visibility">
                                                    <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                            Value="Visible" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <DoubleAnimationUsingKeyFrames Storyboard.TargetName="PaneTransform"
                                                                               Storyboard.TargetProperty="TranslateX">
                                                    <SplineDoubleKeyFrame KeySpline="0.1,0.9 0.2,1.0"
                                                                          KeyTime="0:0:0.12"
                                                                          Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=TemplateSettings.OpenPaneLength}" />
                                                </DoubleAnimationUsingKeyFrames>
                                                <DoubleAnimationUsingKeyFrames Storyboard.TargetName="PaneClipRectangleTransform"
                                                                               Storyboard.TargetProperty="TranslateX">
                                                    <SplineDoubleKeyFrame KeySpline="0.1,0.9 0.2,1.0"
                                                                          KeyTime="0:0:0.12"
                                                                          Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=TemplateSettings.NegativeOpenPaneLength}" />
                                                </DoubleAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="LightDismissLayer"
                                                                               Storyboard.TargetProperty="Visibility">
                                                    <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                            Value="Visible" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <DoubleAnimationUsingKeyFrames Storyboard.TargetName="LightDismissLayer"
                                                                               Storyboard.TargetProperty="Opacity">
                                                    <DiscreteDoubleKeyFrame KeyTime="0:0:0"
                                                                            Value="1.0" />
                                                    <SplineDoubleKeyFrame KeySpline="0.1,0.9 0.2,1.0"
                                                                          KeyTime="0:0:0.12"
                                                                          Value="0.0" />
                                                </DoubleAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualTransition>
                                        <VisualTransition From="OpenCompactOverlayLeft"
                                                          To="ClosedCompactLeft">

                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ColumnDefinition1"
                                                                               Storyboard.TargetProperty="Width">
                                                    <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                            Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=TemplateSettings.CompactPaneGridLength, FallbackValue=0}" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentRoot"
                                                                               Storyboard.TargetProperty="(Grid.Column)">
                                                    <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                            Value="1" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentRoot"
                                                                               Storyboard.TargetProperty="(Grid.ColumnSpan)">
                                                    <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                            Value="1" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PaneRoot"
                                                                               Storyboard.TargetProperty="Visibility">
                                                    <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                            Value="Visible" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="HCPaneBorder"
                                                                               Storyboard.TargetProperty="Visibility">
                                                    <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                            Value="Visible" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <DoubleAnimationUsingKeyFrames Storyboard.TargetName="PaneClipRectangleTransform"
                                                                               Storyboard.TargetProperty="TranslateX">
                                                    <DiscreteDoubleKeyFrame KeyTime="0:0:0"
                                                                            Value="0" />
                                                    <SplineDoubleKeyFrame KeySpline="0.1,0.9 0.2,1.0"
                                                                          KeyTime="0:0:0.12"
                                                                          Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=TemplateSettings.NegativeOpenPaneLengthMinusCompactLength}" />
                                                </DoubleAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="LightDismissLayer"
                                                                               Storyboard.TargetProperty="Visibility">
                                                    <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                            Value="Visible" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <DoubleAnimationUsingKeyFrames Storyboard.TargetName="LightDismissLayer"
                                                                               Storyboard.TargetProperty="Opacity">
                                                    <DiscreteDoubleKeyFrame KeyTime="0:0:0"
                                                                            Value="1.0" />
                                                    <SplineDoubleKeyFrame KeySpline="0.1,0.9 0.2,1.0"
                                                                          KeyTime="0:0:0.12"
                                                                          Value="0.0" />
                                                </DoubleAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PaneRoot"
                                                                               Storyboard.TargetProperty="(Canvas.ZIndex)">
                                                    <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                            Value="0" />
                                                </ObjectAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualTransition>
                                        <VisualTransition From="OpenCompactOverlayRight"
                                                          To="ClosedCompactRight">
                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ColumnDefinition1"
                                                                               Storyboard.TargetProperty="Width">
                                                    <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                            Value="*" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ColumnDefinition2"
                                                                               Storyboard.TargetProperty="Width">
                                                    <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                            Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=TemplateSettings.CompactPaneGridLength, FallbackValue=0}" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentRoot"
                                                                               Storyboard.TargetProperty="(Grid.ColumnSpan)">
                                                    <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                            Value="1" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PaneRoot"
                                                                               Storyboard.TargetProperty="Visibility">
                                                    <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                            Value="Visible" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PaneRoot"
                                                                               Storyboard.TargetProperty="HorizontalAlignment">
                                                    <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                            Value="Right" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="HCPaneBorder"
                                                                               Storyboard.TargetProperty="HorizontalAlignment">
                                                    <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                            Value="Left" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="HCPaneBorder"
                                                                               Storyboard.TargetProperty="Visibility">
                                                    <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                            Value="Visible" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <DoubleAnimationUsingKeyFrames Storyboard.TargetName="PaneClipRectangleTransform"
                                                                               Storyboard.TargetProperty="TranslateX">
                                                    <DiscreteDoubleKeyFrame KeyTime="0:0:0"
                                                                            Value="0" />
                                                    <SplineDoubleKeyFrame KeySpline="0.1,0.9 0.2,1.0"
                                                                          KeyTime="0:0:0.12"
                                                                          Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=TemplateSettings.OpenPaneLengthMinusCompactLength}" />
                                                </DoubleAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="LightDismissLayer"
                                                                               Storyboard.TargetProperty="Visibility">
                                                    <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                            Value="Visible" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <DoubleAnimationUsingKeyFrames Storyboard.TargetName="LightDismissLayer"
                                                                               Storyboard.TargetProperty="Opacity">
                                                    <DiscreteDoubleKeyFrame KeyTime="0:0:0"
                                                                            Value="1.0" />
                                                    <SplineDoubleKeyFrame KeySpline="0.1,0.9 0.2,1.0"
                                                                          KeyTime="0:0:0.12"
                                                                          Value="0.0" />
                                                </DoubleAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PaneRoot"
                                                                               Storyboard.TargetProperty="(Canvas.ZIndex)">
                                                    <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                            Value="0" />
                                                </ObjectAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualTransition>
                                        <VisualTransition From="OpenInlineLeft"
                                                          To="Closed">

                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PaneRoot"
                                                                               Storyboard.TargetProperty="Visibility">
                                                    <DiscreteObjectKeyFrame KeyTime="{StaticResource SplitViewPaneAnimationCloseDuration}"
                                                                            Value="Collapsed" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="HCPaneBorder"
                                                                               Storyboard.TargetProperty="Visibility">
                                                    <DiscreteObjectKeyFrame KeyTime="{StaticResource SplitViewPaneAnimationCloseDuration}"
                                                                            Value="Collapsed" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentRoot"
                                                                               Storyboard.TargetProperty="(Grid.ColumnSpan)">
                                                    <DiscreteObjectKeyFrame KeyTime="0"
                                                                            Value="2" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentRoot"
                                                                               Storyboard.TargetProperty="(Grid.Column)">
                                                    <DiscreteObjectKeyFrame KeyTime="0"
                                                                            Value="0" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PaneRoot"
                                                                               Storyboard.TargetProperty="(Grid.ColumnSpan)">
                                                    <DiscreteObjectKeyFrame KeyTime="{StaticResource SplitViewPaneAnimationCloseDuration}"
                                                                            Value="2" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <DoubleAnimationUsingKeyFrames Storyboard.TargetName="PaneClipRectangleTransform"
                                                                               Storyboard.TargetProperty="TranslateX">
                                                    <SplineDoubleKeyFrame KeySpline="0.0,0.35 0.15,1.0"
                                                                          KeyTime="{StaticResource SplitViewPaneAnimationCloseDuration}"
                                                                          Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=TemplateSettings.NegativeOpenPaneLengthMinusCompactLength}" />
                                                </DoubleAnimationUsingKeyFrames>
                                                <DoubleAnimationUsingKeyFrames Storyboard.TargetName="PaneTransform"
                                                                               Storyboard.TargetProperty="TranslateX">
                                                    <SplineDoubleKeyFrame KeySpline="0.0,0.35 0.15,1.0"
                                                                          KeyTime="{StaticResource SplitViewPaneAnimationCloseDuration}"
                                                                          Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=TemplateSettings.NegativeOpenPaneLength}" />
                                                </DoubleAnimationUsingKeyFrames>
                                                <DoubleAnimationUsingKeyFrames Storyboard.TargetName="ContentTransform"
                                                                               Storyboard.TargetProperty="TranslateX">
                                                    <DiscreteDoubleKeyFrame KeyTime="0"
                                                                            Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=TemplateSettings.OpenPaneLength}" />
                                                    <SplineDoubleKeyFrame KeySpline="0.0,0.35 0.15,1.0"
                                                                          KeyTime="{StaticResource SplitViewPaneAnimationCloseDuration}"
                                                                          Value="0" />
                                                </DoubleAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualTransition>
                                        <VisualTransition From="Closed"
                                                          To="OpenInlineLeft">

                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PaneRoot"
                                                                               Storyboard.TargetProperty="Visibility">
                                                    <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                            Value="Visible" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="HCPaneBorder"
                                                                               Storyboard.TargetProperty="Visibility">
                                                    <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                            Value="Visible" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentRoot"
                                                                               Storyboard.TargetProperty="(Grid.ColumnSpan)">
                                                    <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                            Value="1" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentRoot"
                                                                               Storyboard.TargetProperty="(Grid.Column)">
                                                    <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                            Value="1" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PaneRoot"
                                                                               Storyboard.TargetProperty="(Grid.ColumnSpan)">
                                                    <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                            Value="1" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <DoubleAnimationUsingKeyFrames Storyboard.TargetName="PaneTransform"
                                                                               Storyboard.TargetProperty="TranslateX">
                                                    <DiscreteDoubleKeyFrame KeyTime="0:0:0"
                                                                            Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=TemplateSettings.NegativeOpenPaneLength}" />
                                                    <SplineDoubleKeyFrame KeySpline="0.0,0.35 0.15,1.0"
                                                                          KeyTime="{StaticResource SplitViewPaneAnimationOpenDuration}"
                                                                          Value="0" />
                                                </DoubleAnimationUsingKeyFrames>
                                                <DoubleAnimationUsingKeyFrames FillBehavior="Stop"
                                                                               Storyboard.TargetName="ContentTransform"
                                                                               Storyboard.TargetProperty="TranslateX">
                                                    <LinearDoubleKeyFrame KeyTime="0:0:0"
                                                                          Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=TemplateSettings.NegativeOpenPaneLength}" />
                                                    <SplineDoubleKeyFrame KeySpline="0.0,0.35 0.15,1.0"
                                                                          KeyTime="{StaticResource SplitViewPaneAnimationOpenPreDuration}"
                                                                          Value="0" />
                                                </DoubleAnimationUsingKeyFrames>
                                                <DoubleAnimationUsingKeyFrames Storyboard.TargetName="PaneClipRectangleTransform"
                                                                               Storyboard.TargetProperty="TranslateX">
                                                    <DiscreteDoubleKeyFrame KeyTime="0:0:0"
                                                                            Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=TemplateSettings.NegativeOpenPaneLength}" />
                                                    <SplineDoubleKeyFrame KeySpline="0.0,0.35 0.15,1.0"
                                                                          KeyTime="{StaticResource SplitViewPaneAnimationOpenDuration}"
                                                                          Value="0" />
                                                </DoubleAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualTransition>
                                        <VisualTransition From="ClosedCompactLeft"
                                                          To="OpenInlineLeft">
                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PaneRoot"
                                                                               Storyboard.TargetProperty="Visibility">
                                                    <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                            Value="Visible" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="HCPaneBorder"
                                                                               Storyboard.TargetProperty="Visibility">
                                                    <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                            Value="Visible" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentRoot"
                                                                               Storyboard.TargetProperty="(Grid.ColumnSpan)">
                                                    <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                            Value="1" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentRoot"
                                                                               Storyboard.TargetProperty="(Grid.Column)">
                                                    <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                            Value="1" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PaneRoot"
                                                                               Storyboard.TargetProperty="(Grid.ColumnSpan)">
                                                    <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                            Value="1" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <DoubleAnimationUsingKeyFrames FillBehavior="Stop"
                                                                               Storyboard.TargetName="ContentTransform"
                                                                               Storyboard.TargetProperty="TranslateX">
                                                    <LinearDoubleKeyFrame KeyTime="0:0:0"
                                                                          Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=TemplateSettings.NegativeOpenPaneLengthMinusCompactLength}" />
                                                    <SplineDoubleKeyFrame KeySpline="0.0,0.35 0.15,1.0"
                                                                          KeyTime="{StaticResource SplitViewPaneAnimationOpenPreDuration}"
                                                                          Value="0" />
                                                </DoubleAnimationUsingKeyFrames>
                                                <DoubleAnimationUsingKeyFrames Storyboard.TargetName="PaneClipRectangleTransform"
                                                                               Storyboard.TargetProperty="TranslateX">
                                                    <DiscreteDoubleKeyFrame KeyTime="0:0:0"
                                                                            Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=TemplateSettings.NegativeOpenPaneLengthMinusCompactLength}" />
                                                    <SplineDoubleKeyFrame KeySpline="0.0,0.35 0.15,1.0"
                                                                          KeyTime="{StaticResource SplitViewPaneAnimationOpenDuration}"
                                                                          Value="0" />
                                                </DoubleAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualTransition>
                                        <VisualTransition From="OpenInlineLeft"
                                                          To="ClosedCompactLeft">

                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ColumnDefinition1"
                                                                               Storyboard.TargetProperty="Width">
                                                    <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                            Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=TemplateSettings.CompactPaneGridLength, FallbackValue=0}" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentRoot"
                                                                               Storyboard.TargetProperty="(Grid.Column)">
                                                    <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                            Value="1" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentRoot"
                                                                               Storyboard.TargetProperty="(Grid.ColumnSpan)">
                                                    <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                            Value="1" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PaneRoot"
                                                                               Storyboard.TargetProperty="Visibility">
                                                    <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                            Value="Visible" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <DoubleAnimationUsingKeyFrames FillBehavior="Stop"
                                                                               Storyboard.TargetName="ContentTransform"
                                                                               Storyboard.TargetProperty="TranslateX">
                                                    <LinearDoubleKeyFrame KeyTime="0:0:0"
                                                                          Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=TemplateSettings.OpenPaneLengthMinusCompactLength}" />
                                                    <SplineDoubleKeyFrame KeySpline="0.0,0.35 0.15,1.0"
                                                                          KeyTime="{StaticResource SplitViewPaneAnimationOpenPreDuration}"
                                                                          Value="0" />
                                                </DoubleAnimationUsingKeyFrames>
                                                <DoubleAnimationUsingKeyFrames Storyboard.TargetName="PaneClipRectangleTransform"
                                                                               Storyboard.TargetProperty="TranslateX">
                                                    <DiscreteDoubleKeyFrame KeyTime="0:0:0"
                                                                            Value="0" />
                                                    <SplineDoubleKeyFrame KeySpline="0.0,0.35 0.15,1.0"
                                                                          KeyTime="{StaticResource SplitViewPaneAnimationOpenDuration}"
                                                                          Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=TemplateSettings.NegativeOpenPaneLengthMinusCompactLength}" />
                                                </DoubleAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualTransition>
                                    </VisualStateGroup.Transitions>
                                    <VisualState x:Name="Closed" />

                                    <VisualState x:Name="ClosedCompactLeft">
                                        <Storyboard>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ColumnDefinition1"
                                                                           Storyboard.TargetProperty="Width">
                                                <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                        Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=TemplateSettings.CompactPaneGridLength, FallbackValue=0}" />
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentRoot"
                                                                           Storyboard.TargetProperty="(Grid.Column)">
                                                <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                        Value="1" />
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentRoot"
                                                                           Storyboard.TargetProperty="(Grid.ColumnSpan)">
                                                <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                        Value="1" />
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PaneRoot"
                                                                           Storyboard.TargetProperty="Visibility">
                                                <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                        Value="Visible" />
                                            </ObjectAnimationUsingKeyFrames>
                                            <DoubleAnimation Storyboard.TargetName="PaneClipRectangleTransform"
                                                             Storyboard.TargetProperty="TranslateX"
                                                             To="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=TemplateSettings.NegativeOpenPaneLengthMinusCompactLength}"
                                                             Duration="0:0:0" />
                                        </Storyboard>
                                        <VisualState.Setters>
                                            <Setter Target="PaneRoot.(Grid.Row)"
                                                    Value="1" />
                                            <Setter Target="ResizeElementBorder.(Grid.Row)"
                                                    Value="1" />
                                            <Setter Target="TabContentBorder.(Grid.Column)"
                                                    Value="0" />
                                            <Setter Target="TabContentBorder.(Grid.ColumnSpan)"
                                                    Value="2" />
                                        </VisualState.Setters>
                                    </VisualState>
                                    <VisualState x:Name="ClosedCompactRight">

                                        <Storyboard>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ColumnDefinition1"
                                                                           Storyboard.TargetProperty="Width">
                                                <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                        Value="*" />
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ColumnDefinition2"
                                                                           Storyboard.TargetProperty="Width">
                                                <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                        Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=TemplateSettings.CompactPaneGridLength, FallbackValue=0}" />
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentRoot"
                                                                           Storyboard.TargetProperty="(Grid.ColumnSpan)">
                                                <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                        Value="1" />
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PaneRoot"
                                                                           Storyboard.TargetProperty="Visibility">
                                                <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                        Value="Visible" />
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PaneRoot"
                                                                           Storyboard.TargetProperty="(Grid.ColumnSpan)">
                                                <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                        Value="2" />
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PaneRoot"
                                                                           Storyboard.TargetProperty="HorizontalAlignment">
                                                <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                        Value="Right" />
                                            </ObjectAnimationUsingKeyFrames>
                                            <DoubleAnimation Storyboard.TargetName="PaneClipRectangleTransform"
                                                             Storyboard.TargetProperty="TranslateX"
                                                             To="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=TemplateSettings.OpenPaneLengthMinusCompactLength}"
                                                             Duration="0:0:0" />
                                        </Storyboard>

                                        <VisualState.Setters>
                                            <Setter Target="PaneRoot.(Grid.Row)"
                                                    Value="1" />
                                            <Setter Target="ResizeElementBorder.(Grid.Row)"
                                                    Value="1" />
                                            <Setter Target="TabContentBorder.(Grid.Column)"
                                                    Value="0" />
                                            <Setter Target="TabContentBorder.(Grid.ColumnSpan)"
                                                    Value="2" />
                                        </VisualState.Setters>
                                    </VisualState>
                                    <VisualState x:Name="OpenOverlayLeft">
                                        <Storyboard>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PaneRoot"
                                                                           Storyboard.TargetProperty="(Canvas.ZIndex)">
                                                <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                        Value="3" />
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PaneRoot"
                                                                           Storyboard.TargetProperty="Visibility">
                                                <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                        Value="Visible" />
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PaneRoot"
                                                                           Storyboard.TargetProperty="Background">
                                                <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                        Value="{ThemeResource SystemControlPageBackgroundChromeLowBrush}" />
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="HCPaneBorder"
                                                                           Storyboard.TargetProperty="Visibility">
                                                <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                        Value="Visible" />
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="LightDismissLayer"
                                                                           Storyboard.TargetProperty="Visibility">
                                                <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                        Value="Visible" />
                                            </ObjectAnimationUsingKeyFrames>
                                        </Storyboard>
                                    </VisualState>
                                    <VisualState x:Name="OpenOverlayRight">
                                        <Storyboard>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PaneRoot"
                                                                           Storyboard.TargetProperty="(Canvas.ZIndex)">
                                                <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                        Value="3" />
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PaneRoot"
                                                                           Storyboard.TargetProperty="Visibility">
                                                <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                        Value="Visible" />
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PaneRoot"
                                                                           Storyboard.TargetProperty="HorizontalAlignment">
                                                <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                        Value="Right" />
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="HCPaneBorder"
                                                                           Storyboard.TargetProperty="Visibility">
                                                <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                        Value="Visible" />
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="HCPaneBorder"
                                                                           Storyboard.TargetProperty="HorizontalAlignment">
                                                <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                        Value="Left" />
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="LightDismissLayer"
                                                                           Storyboard.TargetProperty="Visibility">
                                                <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                        Value="Visible" />
                                            </ObjectAnimationUsingKeyFrames>
                                        </Storyboard>
                                    </VisualState>
                                    <VisualState x:Name="OpenInlineLeft">
                                        <VisualState.Setters>
                                            <Setter Target="PaneRoot.Visibility"
                                                    Value="Visible" />
                                            <Setter Target="HCPaneBorder.Visibility"
                                                    Value="Visible" />
                                            <Setter Target="ContentRoot.(Grid.ColumnSpan)"
                                                    Value="1" />
                                            <Setter Target="ContentRoot.(Grid.Column)"
                                                    Value="1" />
                                            <Setter Target="PaneRoot.(Grid.ColumnSpan)"
                                                    Value="1" />
                                            <Setter Target="PaneTransform.TranslateX"
                                                    Value="0" />
                                            <Setter Target="ContentTransform.TranslateX"
                                                    Value="0" />
                                            <Setter Target="PaneClipRectangleTransform.TranslateX"
                                                    Value="0" />

                                            <Setter Target="PaneRoot.(Grid.Row)"
                                                    Value="1" />
                                            <Setter Target="ResizeElementBorder.(Grid.Row)"
                                                    Value="1" />
                                            <Setter Target="TabContentBorder.(Grid.Column)"
                                                    Value="0" />
                                            <Setter Target="TabContentBorder.(Grid.ColumnSpan)"
                                                    Value="2" />
                                        </VisualState.Setters>
                                    </VisualState>
                                    <VisualState x:Name="OpenInlineRight">

                                        <Storyboard>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ColumnDefinition1"
                                                                           Storyboard.TargetProperty="Width">
                                                <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                        Value="*" />
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ColumnDefinition2"
                                                                           Storyboard.TargetProperty="Width">
                                                <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                        Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=TemplateSettings.OpenPaneGridLength, FallbackValue=0}" />
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentRoot"
                                                                           Storyboard.TargetProperty="(Grid.ColumnSpan)">
                                                <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                        Value="1" />
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PaneRoot"
                                                                           Storyboard.TargetProperty="Visibility">
                                                <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                        Value="Visible" />
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PaneRoot"
                                                                           Storyboard.TargetProperty="(Grid.Column)">
                                                <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                        Value="1" />
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PaneRoot"
                                                                           Storyboard.TargetProperty="(Grid.ColumnSpan)">
                                                <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                        Value="1" />
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="HCPaneBorder"
                                                                           Storyboard.TargetProperty="HorizontalAlignment">
                                                <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                        Value="Left" />
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="HCPaneBorder"
                                                                           Storyboard.TargetProperty="Visibility">
                                                <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                        Value="Visible" />
                                            </ObjectAnimationUsingKeyFrames>
                                        </Storyboard>

                                        <VisualState.Setters>
                                            <Setter Target="PaneRoot.(Grid.Row)"
                                                    Value="1" />
                                            <Setter Target="ResizeElementBorder.(Grid.Row)"
                                                    Value="1" />
                                            <Setter Target="TabContentBorder.(Grid.Column)"
                                                    Value="0" />
                                            <Setter Target="TabContentBorder.(Grid.ColumnSpan)"
                                                    Value="2" />
                                        </VisualState.Setters>
                                    </VisualState>
                                    <VisualState x:Name="OpenCompactOverlayLeft">

                                        <Storyboard>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PaneRoot"
                                                                           Storyboard.TargetProperty="(Canvas.ZIndex)">
                                                <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                        Value="3" />
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ColumnDefinition1"
                                                                           Storyboard.TargetProperty="Width">
                                                <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                        Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=TemplateSettings.CompactPaneGridLength, FallbackValue=0}" />
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentRoot"
                                                                           Storyboard.TargetProperty="(Grid.Column)">
                                                <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                        Value="1" />
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentRoot"
                                                                           Storyboard.TargetProperty="(Grid.ColumnSpan)">
                                                <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                        Value="1" />
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PaneRoot"
                                                                           Storyboard.TargetProperty="Visibility">
                                                <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                        Value="Visible" />
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="HCPaneBorder"
                                                                           Storyboard.TargetProperty="Visibility">
                                                <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                        Value="Visible" />
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="LightDismissLayer"
                                                                           Storyboard.TargetProperty="Visibility">
                                                <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                        Value="Visible" />
                                            </ObjectAnimationUsingKeyFrames>
                                        </Storyboard>
                                    </VisualState>
                                    <VisualState x:Name="OpenCompactOverlayRight">

                                        <Storyboard>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PaneRoot"
                                                                           Storyboard.TargetProperty="(Canvas.ZIndex)">
                                                <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                        Value="3" />
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ColumnDefinition1"
                                                                           Storyboard.TargetProperty="Width">
                                                <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                        Value="*" />
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ColumnDefinition2"
                                                                           Storyboard.TargetProperty="Width">
                                                <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                        Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=TemplateSettings.CompactPaneGridLength, FallbackValue=0}" />
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentRoot"
                                                                           Storyboard.TargetProperty="(Grid.ColumnSpan)">
                                                <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                        Value="1" />
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PaneRoot"
                                                                           Storyboard.TargetProperty="Visibility">
                                                <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                        Value="Visible" />
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PaneRoot"
                                                                           Storyboard.TargetProperty="HorizontalAlignment">
                                                <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                        Value="Right" />
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="HCPaneBorder"
                                                                           Storyboard.TargetProperty="HorizontalAlignment">
                                                <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                        Value="Left" />
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="HCPaneBorder"
                                                                           Storyboard.TargetProperty="Visibility">
                                                <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                        Value="Visible" />
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="LightDismissLayer"
                                                                           Storyboard.TargetProperty="Visibility">
                                                <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                        Value="Visible" />
                                            </ObjectAnimationUsingKeyFrames>
                                        </Storyboard>
                                    </VisualState>
                                </VisualStateGroup>
                                <VisualStateGroup x:Name="OverlayVisibilityStates">
                                    <VisualState x:Name="OverlayNotVisible" />
                                    <VisualState x:Name="OverlayVisible">

                                        <Storyboard>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="LightDismissLayer"
                                                                           Storyboard.TargetProperty="Fill">
                                                <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                        Value="{ThemeResource SplitViewLightDismissOverlayBackground}" />
                                            </ObjectAnimationUsingKeyFrames>
                                        </Storyboard>
                                    </VisualState>
                                </VisualStateGroup>

                                <VisualStateGroup x:Name="ResizerStates">
                                    <VisualState x:Name="ResizerNormal" />
                                    <VisualState x:Name="ResizerPointerOver">
                                        <Storyboard>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ResizeElementBorder"
                                                                           Storyboard.TargetProperty="Background">
                                                <DiscreteObjectKeyFrame KeyTime="0"
                                                                        Value="{ThemeResource ButtonBackgroundPointerOver}" />
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ResizeElementBorder"
                                                                           Storyboard.TargetProperty="BorderBrush">
                                                <DiscreteObjectKeyFrame KeyTime="0"
                                                                        Value="{ThemeResource ButtonBorderBrushPointerOver}" />
                                            </ObjectAnimationUsingKeyFrames>
                                        </Storyboard>
                                    </VisualState>

                                    <VisualState x:Name="ResizerPressed">
                                        <Storyboard>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ResizeElementBorder"
                                                                           Storyboard.TargetProperty="Background">
                                                <DiscreteObjectKeyFrame KeyTime="0"
                                                                        Value="{ThemeResource ButtonBackgroundPressed}" />
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ResizeElementBorder"
                                                                           Storyboard.TargetProperty="BorderBrush">
                                                <DiscreteObjectKeyFrame KeyTime="0"
                                                                        Value="{ThemeResource ButtonBorderBrushPressed}" />
                                            </ObjectAnimationUsingKeyFrames>
                                        </Storyboard>
                                    </VisualState>
                                </VisualStateGroup>
                            </VisualStateManager.VisualStateGroups>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <DataTemplate x:Key="FolderTemplate"
                      x:DataType="playlists:PlaylistOrFolder">
            <TreeViewItem AutomationProperties.Name="{x:Bind Name}"
                          ItemsSource="{x:Bind ItemsIfFolder}"
                          IsExpanded="True">
                <StackPanel Orientation="Horizontal">
                    <FontIcon FontFamily="/Assets/Fonts/MediaPlayerIcons.ttf#Media Player Fluent Icons"
                              Glyph="&#xE838;" />
                    <TextBlock Margin="0,0,10,0" />
                    <TextBlock Text="{x:Bind Name}" />
                </StackPanel>
            </TreeViewItem>
        </DataTemplate>

        <DataTemplate x:Key="PlaylistTemplate"
                      x:DataType="playlists:PlaylistOrFolder">
            <TreeViewItem Padding="-24,0,0,0"
                          AutomationProperties.Name="{x:Bind Name}">
                <StackPanel Orientation="Horizontal">
                    <TextBlock Margin="0,0,10,0" />
                    <TextBlock Text="{x:Bind Name}" />
                </StackPanel>
            </TreeViewItem>
        </DataTemplate>
        <DataTemplate x:Key="PlaylistTemplateWithMargin"
                      x:DataType="playlists:PlaylistOrFolder">
            <TreeViewItem Padding="-34,0,0,0"
                          AutomationProperties.Name="{x:Bind Name}">
                <StackPanel Orientation="Horizontal">
                    <TextBlock Margin="0,0,10,0" />
                    <TextBlock Text="{x:Bind Name}" />
                </StackPanel>
            </TreeViewItem>
        </DataTemplate>


        <local:PlaylistsItemTemplateSelector FolderTemplate="{StaticResource FolderTemplate}"
                                             PlaylistTemplate="{StaticResource PlaylistTemplate}"
                                             PlaylistTemplateWithMargin="{StaticResource PlaylistTemplateWithMargin}"
                                             x:Key="PlaylistsItemTemplateSelector" />
        <DataTemplate x:Key="RegularSidebarItem"
                      x:DataType="local:SidebarItem">
            <Grid x:Name="ContentGrid">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>
                <Viewbox x:Name="IconBox"
                         Height="16"
                         Width="16"
                         Margin="0,0,0,0"
                         VerticalAlignment="Center"
                         HorizontalAlignment="Center">
                    <ContentPresenter Content="{x:Bind Icon}" />
                </Viewbox>
                <TextBlock x:Name="ContentPresenter"
                           Grid.Column="1"
                           Text="{x:Bind Title}"
                           Margin="12,0,16,0"
                           Foreground="{ThemeResource DefaultTextForegroundThemeBrush}"
                           TextWrapping="NoWrap"
                           VerticalAlignment="Center"
                           AutomationProperties.AccessibilityView="Raw" />

            </Grid>
        </DataTemplate>
        <DataTemplate x:Key="CountedSidebarItem"
                      x:DataType="local:SidebarItem">
            <Grid x:Name="ContentGrid">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>
                <Viewbox x:Name="IconBox"
                         Height="16"
                         Width="16"
                         Margin="0,0,0,0"
                         VerticalAlignment="Center"
                         HorizontalAlignment="Center">
                    <ContentPresenter Content="{x:Bind Icon}" />
                </Viewbox>
                <TextBlock x:Name="ContentPresenter"
                           Grid.Column="1"
                           Text="{x:Bind Title}"
                           Margin="12,0,16,0"
                           Foreground="{ThemeResource DefaultTextForegroundThemeBrush}"
                           TextWrapping="NoWrap"
                           VerticalAlignment="Center"
                           AutomationProperties.AccessibilityView="Raw" />

                <InfoBadge Grid.Column="2"
                           VerticalAlignment="Center"
                           Value="{x:Bind Count, Mode=OneWay}" />
            </Grid>
        </DataTemplate>
        <DataTemplate x:Key="HeaderSidebarItem"
                      x:DataType="local:SidebarItem">
            <TextBlock x:Name="HeaderText"
                       VerticalAlignment="Center"
                       Opacity=".8"
                       Style="{ThemeResource NavigationViewItemHeaderTextStyle}"
                       Text="{x:Bind Title}"
                       TextWrapping="NoWrap" />
        </DataTemplate>
        <local:SidebarItemTemplateSelector Regular="{StaticResource RegularSidebarItem}"
                                           Header="{StaticResource HeaderSidebarItem}"
                                           Counted="{StaticResource CountedSidebarItem}"
                                           x:Key="SidebarItemTemplateSelector" />
    </UserControl.Resources>

    <Grid>
        <SplitView  DisplayMode="Inline"
                    PaneClosing="SidebarSplitter_OnPaneClosing"
                    PaneOpening="SidebarSplitter_OnPaneOpening"
                    IsPaneOpen="True"
                    CompactPaneLength="24"
                    Style="{StaticResource ResizableSidebar}"
                    x:Name="SidebarSplitter">
            <SplitView.Pane>
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <!--  Search Box            -->
                        <RowDefinition Height="Auto" />
                        <!--  Regular Sidebar Items -->
                        <RowDefinition x:FieldModifier="public"
                                       x:Name="RegularRow"
                                       Height="Auto" />
                        <!--  Sorting & Filtering   -->
                        <RowDefinition x:FieldModifier="public"
                                       x:Name="PlaylistsRow" />
                        <!--  Playlists             -->
                        <RowDefinition Height="Auto" />
                        <!--  Bottom Padding        -->
                    </Grid.RowDefinitions>

                    <StackPanel>
                        <Button Background="{ThemeResource LayerFillColorDefaultBrush}"
                                CornerRadius="0"
                                HorizontalContentAlignment="Stretch"
                                HorizontalAlignment="Stretch"
                                Margin="-1,0"
                                Padding="12,12"
                                BorderThickness="0,1"
                                BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}">
                            <Button.Flyout>
                                <MenuFlyout Placement="BottomEdgeAlignedLeft">
                                    <MenuFlyout.Items>
                                        <MenuFlyoutItem Tapped="Settings_Tapped"
                                                        Text="Settings">
                                            <MenuFlyoutItem.Icon>
                                                <FontIcon FontFamily="Segoe Fluent Icons"
                                                          Glyph="&#xE115;" />
                                            </MenuFlyoutItem.Icon>
                                        </MenuFlyoutItem>

                                        <MenuFlyoutSeparator />
                                        <MenuFlyoutItem Text="Sign Out"
                                                        Foreground="Red">
                                            <MenuFlyoutItem.Icon>
                                                <FontIcon FontFamily="Segoe Fluent Icons"
                                                          Glyph="&#xF3B1;" />
                                            </MenuFlyoutItem.Icon>
                                        </MenuFlyoutItem>
                                    </MenuFlyout.Items>
                                </MenuFlyout>
                            </Button.Flyout>
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto" />
                                    <ColumnDefinition />
                                </Grid.ColumnDefinitions>
                                <PersonPicture x:Name="Prf"
                                               Width="48"
                                               ProfilePicture="{x:Bind GetProfilePicture(UserInfo), Mode=OneWay}"
                                               Initials="{x:Bind GetInitials(UserInfo), Mode=OneWay}"
                                               DisplayName="{x:Bind GetDisplayName(UserInfo), Mode=OneWay}"
                                               Height="48" />
                                <StackPanel Grid.Column="1"
                                            Margin="8,0"
                                            VerticalAlignment="Center"
                                            Orientation="Vertical">
                                    <TextBlock x:Name="Name"
                                               Text="{x:Bind GetDisplayName(UserInfo), Mode=OneWay}"
                                               FontSize="16" />
                                    <TextBlock x:Name="Product"
                                               Opacity=".6"
                                               Text="Spotify Premium"
                                               FontWeight="Bold"
                                               FontSize="9" />
                                </StackPanel>
                            </Grid>
                        </Button>
                        <AutoSuggestBox Margin="8,8,8,8"
                                        QueryIcon="Find"
                                        PlaceholderText="Find..." />
                    </StackPanel>
                    <ListView Grid.Row="1"
                              SelectedIndex="1"
                              ItemsSource="{x:Bind FixedItems, Mode=OneWay}"
                              ItemTemplateSelector="{StaticResource SidebarItemTemplateSelector}"
                              IsItemClickEnabled="True"
                              ItemClick="FixedSidebarItemsListView_OnItemClick"
                              SelectionChanged="FixedSidebarItemsListView_OnSelectionChanged"
                              Loaded="FixedSidebarItemsListView_OnLoaded"
                              x:Name="FixedSidebarItemsListView">
                        <ListView.ItemsPanel>
                            <ItemsPanelTemplate>
                                <StackPanel />
                            </ItemsPanelTemplate>
                        </ListView.ItemsPanel>
                    </ListView>

                    <StackPanel Grid.Row="2"
                                Margin="0,0,6,0">
                        <Grid Margin="0,6,0,0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>

                            <NavigationViewItemHeader Padding="0"
                                                      Content="Playlists" />

                            <!-- <ComboBox Grid.Column="1" -->
                            <!--           x:Name="PlaylistSortComboBox" -->
                            <!--           CornerRadius="4,0,0,4" -->
                            <!--           VerticalAlignment="Center" -->
                            <!--           Margin="0,0,0,0" -->
                            <!--           HorizontalAlignment="Stretch"> -->
                            <!-- </ComboBox> -->

                            <Button CornerRadius="4,4,4,4"
                                    VerticalAlignment="Center"
                                    x:Name="AddPlaylistButton"
                                    Tapped="AddPlaylistButton_OnTapped"
                                    Padding="4.5"
                                    Grid.Column="2">
                                <FontIcon FontFamily="{ThemeResource SymbolThemeFontFamily}"
                                          Glyph="&#xE109;" />
                            </Button>
                        </Grid>
                    </StackPanel>

                    <TreeView Grid.Row="3"
                              ItemTemplateSelector="{StaticResource PlaylistsItemTemplateSelector}"
                              ItemsSource="{x:Bind Playlists}"
                              ItemInvoked="PlaylistsListView_OnItemInvoked"
                              x:Name="PlaylistsListView" />

                    <TextBlock Text="It's empty here..."
                               Grid.Row="3"
                               Visibility="{x:Bind HideIfNonZero(Playlists.Count), Mode=OneWay}"
                               HorizontalAlignment="Center"
                               VerticalAlignment="Center"
                               x:Name="NoPlaylistsView" />

                    <Border Grid.Row="4"
                            Height="110" />
                </Grid>
            </SplitView.Pane>
            <ContentPresenter x:Name="MainNavigator"
                              VerticalContentAlignment="Stretch"
                              HorizontalContentAlignment="Stretch" />
        </SplitView>
    </Grid>
</UserControl>
